<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>የመደብር ማስተናገያ - ሰይፈ ልዩ በለጬ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a472a;
            --secondary: #d4af37;
            --danger: #dc3545;
            --success: #28a745;
            --warning: #ffc107;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
            --text: #333333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Ethiopic', sans-serif;
            background: #f0f2f5;
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            color: var(--secondary);
        }
        
        .shop-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .shop-owner {
            text-align: right;
        }
        
        .shop-owner strong {
            display: block;
            font-size: 1.1rem;
        }
        
        .shop-owner .phone {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.8);
        }
        
        /* Dashboard Layout */
        .dashboard {
            display: flex;
            min-height: calc(100vh - 70px);
        }
        
        /* Sidebar */
        .sidebar {
            width: 250px;
            background: white;
            border-right: 1px solid #e0e0e0;
            padding: 20px 0;
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 25px;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .nav-item:hover {
            background: #f8f9fa;
            border-left-color: var(--primary);
        }
        
        .nav-item.active {
            background: #f0f7f0;
            border-left-color: var(--secondary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .nav-item i {
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }
        
        .page-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card.pending { border-top-color: var(--warning); }
        .stat-card.preparing { border-top-color: var(--info); }
        .stat-card.onway { border-top-color: var(--secondary); }
        .stat-card.delivered { border-top-color: var(--success); }
        
        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-card.pending .stat-icon { background: var(--warning); }
        .stat-card.preparing .stat-icon { background: var(--info); }
        .stat-card.onway .stat-icon { background: var(--secondary); }
        .stat-card.delivered .stat-icon { background: var(--success); }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--dark);
            line-height: 1;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.95rem;
            margin-top: 5px;
        }
        
        /* Orders Table */
        .orders-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .table-actions {
            display: flex;
            gap: 10px;
        }
        
        .filter-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .orders-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid #e0e0e0;
        }
        
        .orders-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .order-row:hover {
            background: #f8f9fa;
        }
        
        .order-id {
            font-weight: 600;
            color: var(--primary);
        }
        
        .customer-info {
            min-width: 180px;
        }
        
        .customer-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .customer-phone {
            color: #666;
            font-size: 0.9rem;
        }
        
        .order-items {
            max-width: 200px;
        }
        
        .item-list {
            list-style: none;
        }
        
        .item-list li {
            margin-bottom: 5px;
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }
        
        .item-list li:last-child {
            border-bottom: none;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .status-pending { background: #fff3cd; color: #856404; }
        .status-confirmed { background: #cce5ff; color: #004085; }
        .status-preparing { background: #d1ecf1; color: #0c5460; }
        .status-ready { background: #fff3cd; color: #856404; }
        .status-onway { background: #e2e3e5; color: #383d41; }
        .status-delivered { background: #d4edda; color: #155724; }
        .status-cancelled { background: #f8d7da; color: #721c24; }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2d5a3d;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: #212529;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-info {
            background: var(--info);
            color: white;
        }
        
        /* Delivery Boys Section */
        .delivery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .delivery-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-left: 4px solid var(--success);
        }
        
        .delivery-card.busy { border-left-color: var(--warning); }
        .delivery-card.offline { border-left-color: #ccc; }
        
        .delivery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .delivery-name {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--dark);
        }
        
        .delivery-status {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-available { background: #d4edda; color: #155724; }
        .status-busy { background: #fff3cd; color: #856404; }
        .status-offline { background: #e2e3e5; color: #383d41; }
        
        .delivery-details {
            color: #666;
            font-size: 0.9rem;
        }
        
        .delivery-details div {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                display: flex;
                overflow-x: auto;
                padding: 10px;
            }
            
            .nav-item {
                padding: 10px 15px;
                white-space: nowrap;
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            .nav-item.active {
                border-left: none;
                border-bottom: 3px solid var(--secondary);
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .shop-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .shop-owner {
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .orders-table {
                display: block;
                overflow-x: auto;
            }
            
            .table-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .table-actions {
                flex-wrap: wrap;
            }
        }
        
        /* Animation for new orders */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(26, 71, 42, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(26, 71, 42, 0); }
            100% { box-shadow: 0 0 0 0 rgba(26, 71, 42, 0); }
        }
        
        .new-order {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-store" style="color: var(--secondary); font-size: 1.8rem;"></i>
            <h1>ሰይፈ ልዩ በለጬ - መደብር</h1>
        </div>
        <div class="shop-info">
            <div class="shop-owner">
                <strong>ሰይፈ መለስ</strong>
                <div class="phone">+251 913 550 415</div>
            </div>
            <div class="current-time" id="currentTime">
                <!-- Time will be updated by JavaScript -->
            </div>
        </div>
    </header>
    
    <!-- Dashboard Layout -->
    <div class="dashboard">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>ዋና ገጽ</span>
            </a>
            <a href="#orders" class="nav-item" data-page="orders">
                <i class="fas fa-shopping-cart"></i>
                <span>ትእዛዞች</span>
                <span class="badge" id="pendingBadge" style="margin-left: auto; background: var(--warning); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">0</span>
            </a>
            <a href="#delivery" class="nav-item" data-page="delivery">
                <i class="fas fa-motorcycle"></i>
                <span>የመላኪያ ሰራተኞች</span>
            </a>
            <a href="#inventory" class="nav-item" data-page="inventory">
                <i class="fas fa-boxes"></i>
                <span>ክምችት</span>
            </a>
            <a href="#analytics" class="nav-item" data-page="analytics">
                <i class="fas fa-chart-line"></i>
                <span>ትንታኔ</span>
            </a>
            <a href="#settings" class="nav-item" data-page="settings">
                <i class="fas fa-cog"></i>
                <span>ቅንብሮች</span>
            </a>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page (Default) -->
            <div id="dashboardPage" class="page">
                <h2 class="page-title">
                    <i class="fas fa-tachometer-alt"></i>
                    የትእዛዝ ማስተናገያ
                </h2>
                
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card pending">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="pendingCount">0</div>
                                <div class="stat-label">አዲስ ትእዛዝ</div>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card preparing">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="preparingCount">0</div>
                                <div class="stat-label">በማዘጋጀት ላይ</div>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-utensils"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card onway">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="onwayCount">0</div>
                                <div class="stat-label">በመንገድ ላይ</div>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-motorcycle"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card delivered">
                        <div class="stat-header">
                            <div>
                                <div class="stat-value" id="deliveredCount">0</div>
                                <div class="stat-label">የተደረሱ</div>
                            </div>
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Orders -->
                <div class="orders-container">
                    <div class="table-header">
                        <h3 style="color: var(--primary);">የቅርብ ትእዛዞች</h3>
                        <div class="table-actions">
                            <button class="filter-btn active" data-filter="all">ሁሉም</button>
                            <button class="filter-btn" data-filter="pending">አዲስ</button>
                            <button class="filter-btn" data-filter="preparing">በማዘጋጀት</button>
                            <button class="filter-btn" data-filter="onway">በመንገድ</button>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="orders-table" id="ordersTable">
                            <thead>
                                <tr>
                                    <th>ትእዛዝ #</th>
                                    <th>ደንበኛ</th>
                                    <th>እቃዎች</th>
                                    <th>ጠቅላላ</th>
                                    <th>ሁኔታ</th>
                                    <th>ሰዓት</th>
                                    <th>እርምጃ</th>
                                </tr>
                            </thead>
                            <tbody id="ordersBody">
                                <tr id="noOrdersRow">
                                    <td colspan="7" style="text-align: center; padding: 40px; color: #888;">
                                        <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 15px; color: #ddd; display: block;"></i>
                                        እስካሁን ምንም ትእዛዝ የለም
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Orders Page -->
            <div id="ordersPage" class="page" style="display: none;">
                <h2 class="page-title">
                    <i class="fas fa-shopping-cart"></i>
                    ሁሉም ትእዛዞች
                </h2>
                
                <div class="orders-container">
                    <!-- Orders table will be loaded here -->
                </div>
            </div>
            
            <!-- Delivery Page -->
            <div id="deliveryPage" class="page" style="display: none;">
                <h2 class="page-title">
                    <i class="fas fa-motorcycle"></i>
                    የመላኪያ ሰራተኞች
                </h2>
                
                <div class="delivery-grid" id="deliveryGrid">
                    <!-- Delivery boys will be loaded here -->
                </div>
            </div>
            
            <!-- Inventory Page -->
            <div id="inventoryPage" class="page" style="display: none;">
                <h2 class="page-title">
                    <i class="fas fa-boxes"></i>
                    የምርት ክምችት
                </h2>
                <!-- Inventory management will go here -->
            </div>
        </main>
    </div>
    
    <!-- JavaScript -->
    <script>
        // Sample data for testing
        const sampleOrders = [
            {
                id: "ORD-001",
                customer: "አብርሃም መኮንን",
                phone: "0912345678",
                items: ["ገለምሶ (ሙሉ) x1", "ኮካኮላ x2"],
                total: "630 ብር",
                status: "pending",
                time: "10:30 AM",
                address: "ሰላም በር ኮንዶ"
            },
            {
                id: "ORD-002",
                customer: "ሚካኤል ደምሴ",
                phone: "0923456789",
                items: ["ልዩ (ግማሽ) x1", "ፔፕሲ x1"],
                total: "280 ብር",
                status: "preparing",
                time: "11:15 AM",
                address: "ሰሚት ኮንዶ"
            },
            {
                id: "ORD-003",
                customer: "ሱራፌል አለማየሁ",
                phone: "0934567890",
                items: ["መጥቾ (ሙሉ) x1", "ፕሪዴተር x2"],
                total: "840 ብር",
                status: "onway",
                time: "12:45 PM",
                address: "ቦሌ አካባቢ"
            }
        ];
        
        const deliveryBoys = [
            {
                id: 1,
                name: "አብዱሬ",
                phone: "0948 00 23 20",
                status: "available",
                currentOrder: null,
                completedToday: 5,
                rating: 4.8
            },
            {
                id: 2,
                name: "ሀብታሙ",
                phone: "0911 67 53 57",
                status: "busy",
                currentOrder: "ORD-003",
                completedToday: 3,
                rating: 4.5
            },
            {
                id: 3,
                name: "እንዳልክ",
                phone: "0972 25 50 415",
                status: "available",
                currentOrder: null,
                completedToday: 2,
                rating: 4.7
            }
        ];
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation
            setupNavigation();
            
            // Update time
            updateTime();
            setInterval(updateTime, 60000);
            
            // Load initial data
            loadDashboard();
            loadDeliveryBoys();
            
            // Setup sample data (in real app, this would come from Firebase)
            setTimeout(() => {
                simulateNewOrder();
            }, 2000);
            
            // Setup auto-refresh
            setInterval(checkNewOrders, 10000);
        });
        
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all items
                    navItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show corresponding page
                    const pageId = this.getAttribute('data-page') + 'Page';
                    document.querySelectorAll('.page').forEach(page => {
                        page.style.display = 'none';
                    });
                    document.getElementById(pageId).style.display = 'block';
                    
                    // Load page data
                    if (pageId === 'dashboardPage') {
                        loadDashboard();
                    } else if (pageId === 'deliveryPage') {
                        loadDeliveryBoys();
                    }
                });
            });
        }
        
        function updateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('currentTime').textContent = now.toLocaleDateString('am-ET', options);
        }
        
        function loadDashboard() {
            // Update counts
            document.getElementById('pendingCount').textContent = "2";
            document.getElementById('preparingCount').textContent = "1";
            document.getElementById('onwayCount').textContent = "1";
            document.getElementById('deliveredCount').textContent = "15";
            
            // Update badge
            document.getElementById('pendingBadge').textContent = "2";
            
            // Load orders table
            const ordersBody = document.getElementById('ordersBody');
            ordersBody.innerHTML = '';
            
            if (sampleOrders.length === 0) {
                ordersBody.innerHTML = `
                    <tr id="noOrdersRow">
                        <td colspan="7" style="text-align: center; padding: 40px; color: #888;">
                            <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 15px; color: #ddd; display: block;"></i>
                            እስካሁን ምንም ትእዛዝ የለም
                        </td>
                    </tr>
                `;
                return;
            }
            
            sampleOrders.forEach(order => {
                const row = document.createElement('tr');
                row.className = 'order-row';
                
                // Highlight new orders
                if (order.status === 'pending') {
                    row.classList.add('new-order');
                }
                
                row.innerHTML = `
                    <td class="order-id">${order.id}</td>
                    <td class="customer-info">
                        <div class="customer-name">${order.customer}</div>
                        <div class="customer-phone">
                            <i class="fas fa-phone"></i> ${order.phone}
                        </div>
                        <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                            <i class="fas fa-map-marker-alt"></i> ${order.address}
                        </div>
                    </td>
                    <td class="order-items">
                        <ul class="item-list">
                            ${order.items.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </td>
                    <td><strong>${order.total}</strong></td>
                    <td>
                        <span class="status-badge status-${order.status}">
                            ${getStatusText(order.status)}
                        </span>
                    </td>
                    <td>${order.time}</td>
                    <td>
                        <div class="action-buttons">
                            ${getActionButtons(order.status, order.id)}
                        </div>
                    </td>
                `;
                
                ordersBody.appendChild(row);
            });
            
            // Setup filter buttons
            setupFilterButtons();
        }
        
        function getStatusText(status) {
            const statusMap = {
                'pending': 'በመጠበቅ ላይ',
                'confirmed': 'ተረጋግጧል',
                'preparing': 'በማዘጋጀት ላይ',
                'ready': 'ለመላክ ዝግጁ',
                'onway': 'በመንገድ ላይ',
                'delivered': 'ደርሷል',
                'cancelled': 'ተሰርዟል'
            };
            return statusMap[status] || status;
        }
        
        function getActionButtons(status, orderId) {
            switch(status) {
                case 'pending':
                    return `
                        <button class="btn btn-sm btn-success" onclick="confirmOrder('${orderId}')">
                            <i class="fas fa-check"></i> አረጋግጥ
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="cancelOrder('${orderId}')">
                            <i class="fas fa-times"></i> አትቀበል
                        </button>
                    `;
                case 'confirmed':
                    return `
                        <button class="btn btn-sm btn-info" onclick="startPreparing('${orderId}')">
                            <i class="fas fa-utensils"></i> ጀምር
                        </button>
                    `;
                case 'preparing':
                    return `
                        <button class="btn btn-sm btn-primary" onclick="markAsReady('${orderId}')">
                            <i class="fas fa-check-circle"></i> ዝግጁ ነው
                        </button>
                    `;
                case 'ready':
                    return `
                        <button class="btn btn-sm btn-warning" onclick="assignDelivery('${orderId}')">
                            <i class="fas fa-motorcycle"></i> ላክ
                        </button>
                    `;
                case 'onway':
                    return `
                        <button class="btn btn-sm btn-success" onclick="markAsDelivered('${orderId}')">
                            <i class="fas fa-check-double"></i> ደረሰ
                        </button>
                    `;
                default:
                    return `
                        <button class="btn btn-sm" onclick="viewOrderDetails('${orderId}')">
                            <i class="fas fa-eye"></i> ዝርዝር
                        </button>
                    `;
            }
        }
        
        function setupFilterButtons() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    filterBtns.forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    filterOrders(filter);
                });
            });
        }
        
        function filterOrders(filter) {
            const rows = document.querySelectorAll('.order-row');
            rows.forEach(row => {
                if (filter === 'all' || row.querySelector('.status-badge').className.includes(filter)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        function loadDeliveryBoys() {
            const deliveryGrid = document.getElementById('deliveryGrid');
            deliveryGrid.innerHTML = '';
            
            deliveryBoys.forEach(boy => {
                const card = document.createElement('div');
                card.className = `delivery-card ${boy.status}`;
                
                card.innerHTML = `
                    <div class="delivery-header">
                        <div class="delivery-name">${boy.name}</div>
                        <div class="delivery-status status-${boy.status}">
                            ${boy.status === 'available' ? 'ለትእዛዝ ዝግጁ' : 
                              boy.status === 'busy' ? 'በስራ ላይ' : 'ኦፍላይን'}
                        </div>
                    </div>
                    <div class="delivery-details">
                        <div>
                            <i class="fas fa-phone"></i>
                            <span>${boy.phone}</span>
                        </div>
                        <div>
                            <i class="fas fa-shopping-bag"></i>
                            <span>ዛሬ የደረሰ: ${boy.completedToday} ትእዛዞች</span>
                        </div>
                        <div>
                            <i class="fas fa-star"></i>
                            <span>ደረጃ: ${boy.rating}/5</span>
                        </div>
                        ${boy.currentOrder ? `
                        <div style="background: #fff3cd; padding: 8px; border-radius: 6px; margin-top: 10px;">
                            <i class="fas fa-box"></i>
                            <span>አሁን የሚያደርሰው: ${boy.currentOrder}</span>
                        </div>
                        ` : ''}
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                        <button class="btn btn-sm btn-primary" onclick="callDeliveryBoy('${boy.phone}')">
                            <i class="fas fa-phone"></i> ደውል
                        </button>
                        <button class="btn btn-sm btn-info" onclick="sendMessage('${boy.phone}')">
                            <i class="fab fa-whatsapp"></i> መልእክት
                        </button>
                    </div>
                `;
                
                deliveryGrid.appendChild(card);
            });
        }
        
        // Action functions
        function confirmOrder(orderId) {
            if (confirm(`ትእዛዝ ${orderId} እንዲሰራ ማረጋገጥ ይፈልጋሉ?`)) {
                alert(`ትእዛዝ ${orderId} ተረጋግጧል!`);
                // In real app, update Firebase here
            }
        }
        
        function cancelOrder(orderId) {
            if (confirm(`ትእዛዝ ${orderId} ማሰርዟ ይፈልጋሉ?`)) {
                alert(`ትእዛዝ ${orderId} ተሰርዟል!`);
                // In real app, update Firebase here
            }
        }
        
        function startPreparing(orderId) {
            alert(`ትእዛዝ ${orderId} ማዘጋጀት ተጀምሯል!`);
            // In real app, update Firebase here
        }
        
        function markAsReady(orderId) {
            alert(`ትእዛዝ ${orderId} ለመላክ ዝግጁ ነው!`);
            // In real app, update Firebase here
        }
        
        function assignDelivery(orderId) {
            // Show delivery boys to assign
            const deliveryOptions = deliveryBoys
                .filter(boy => boy.status === 'available')
                .map(boy => `<option value="${boy.id}">${boy.name} - ${boy.phone}</option>`)
                .join('');
            
            const assignHTML = `
                <div style="padding: 20px;">
                    <h3>መላኪያ ሰራተኛ መርጠው ያስገቡ</h3>
                    <select id="deliverySelect" class="form-control" style="width: 100%; padding: 10px; margin: 15px 0;">
                        <option value="">-- መላኪያ ሰራተኛ ይምረጡ --</option>
                        ${deliveryOptions}
                    </select>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button onclick="assignToSelected('${orderId}')" class="btn btn-primary">አረጋግጥ</button>
                        <button onclick="closeDialog()" class="btn">አትቀበል</button>
                    </div>
                </div>
            `;
            
            showDialog(assignHTML);
        }
        
        function assignToSelected(orderId) {
            const select = document.getElementById('deliverySelect');
            if (select.value) {
                const selectedBoy = deliveryBoys.find(boy => boy.id == select.value);
                alert(`ትእዛዝ ${orderId} ለ${selectedBoy.name} ተመድቧል!`);
                closeDialog();
            } else {
                alert('እባክዎ መላኪያ ሰራተኛ ይምረጡ');
            }
        }
        
        function markAsDelivered(orderId) {
            if (confirm(`ትእዛዝ ${orderId} ደርሷል?`)) {
                alert(`ትእዛዝ ${orderId} እንደተደረሰ ምዝግብ ተደርጓል!`);
                // In real app, update Firebase here
            }
        }
        
        function callDeliveryBoy(phone) {
            window.open(`tel:${phone}`, '_system');
        }
        
        function sendMessage(phone) {
            window.open(`https://wa.me/${phone.replace('+', '')}`, '_system');
        }
        
        function showDialog(content) {
            const dialog = document.createElement('div');
            dialog.id = 'customDialog';
            dialog.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
            `;
            
            const dialogContent = document.createElement('div');
            dialogContent.style.cssText = `
                background: white;
                border-radius: 12px;
                max-width: 500px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            `;
            
            dialogContent.innerHTML = content;
            dialog.appendChild(dialogContent);
            document.body.appendChild(dialog);
            
            return dialog;
        }
        
        function closeDialog() {
            const dialog = document.getElementById('customDialog');
            if (dialog) {
                dialog.remove();
            }
        }
        
        // Simulation functions for testing
        function simulateNewOrder() {
            const newOrder = {
                id: "ORD-" + (100 + Math.floor(Math.random() * 900)),
                customer: ["አለማየሁ", "ማርያም", "ተስፋዬ", "ደረበው", "ማሞ"][Math.floor(Math.random() * 5)],
                phone: "09" + Math.floor(10000000 + Math.random() * 90000000),
                items: [["ገለምሶ (ሙሉ)", "ንቅል"][Math.floor(Math.random() * 2)] + " x" + (1 + Math.floor(Math.random() * 3))],
                total: (200 + Math.floor(Math.random() * 800)) + " ብር",
                status: "pending",
                time: new Date().toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'}),
                address: "አዲስ አበባ"
            };
            
            // Show notification
            showNotification(newOrder);
            
            // Add to table
            const ordersBody = document.getElementById('ordersBody');
            const noOrdersRow = document.getElementById('noOrdersRow');
            
            if (noOrdersRow) {
                noOrdersRow.remove();
            }
            
            const row = document.createElement('tr');
            row.className = 'order-row new-order';
            row.innerHTML = `
                <td class="order-id">${newOrder.id}</td>
                <td class="customer-info">
                    <div class="customer-name">${newOrder.customer}</div>
                    <div class="customer-phone">
                        <i class="fas fa-phone"></i> ${newOrder.phone}
                    </div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">
                        <i class="fas fa-map-marker-alt"></i> ${newOrder.address}
                    </div>
                </td>
                <td class="order-items">
                    <ul class="item-list">
                        ${newOrder.items.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                </td>
                <td><strong>${newOrder.total}</strong></td>
                <td>
                    <span class="status-badge status-pending">
                        በመጠበቅ ላይ
                    </span>
                </td>
                <td>${newOrder.time}</td>
                <td>
                    <div class="action-buttons">
                        <button class="btn btn-sm btn-success" onclick="confirmOrder('${newOrder.id}')">
                            <i class="fas fa-check"></i> አረጋግጥ
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="cancelOrder('${newOrder.id}')">
                            <i class="fas fa-times"></i> አትቀበል
                        </button>
                    </div>
                </td>
            `;
            
            ordersBody.prepend(row);
            
            // Update counts
            const pendingCount = parseInt(document.getElementById('pendingCount').textContent);
            document.getElementById('pendingCount').textContent = pendingCount + 1;
            document.getElementById('pendingBadge').textContent = pendingCount + 1;
        }
        
        function showNotification(order) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: white;
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                border-left: 5px solid var(--warning);
                z-index: 3000;
                animation: slideIn 0.3s ease;
                max-width: 350px;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                    <div style="background: var(--warning); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div>
                        <strong style="color: var(--primary);">አዲስ ትእዛዝ!</strong>
                        <div style="font-size: 0.9rem; color: #666;">${order.id}</div>
                    </div>
                </div>
                <div style="color: #555; margin-bottom: 15px;">
                    ${order.customer} - ${order.total}
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-sm btn-success" onclick="this.parentElement.parentElement.remove(); confirmOrder('${order.id}')">
                        አረጋግጥ
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="this.parentElement.parentElement.remove();">
                        አትቀበል
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto remove after 10 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 10000);
        }
        
        function checkNewOrders() {
            // In real app, this would check Firebase for new orders
            // For demo, we simulate occasionally
            if (Math.random() < 0.3) { // 30% chance
                setTimeout(simulateNewOrder, 1000);
            }
        }
        
        // Add CSS for animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
